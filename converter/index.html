<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Km ↔ Mi Converter</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: rgba(255, 255, 255, 0.08);
      --border: rgba(255, 255, 255, 0.16);
      --text: rgba(255, 255, 255, 0.92);
      --muted: rgba(255, 255, 255, 0.7);
      --shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 700px at 20% 10%, #263b8d 0%, transparent 55%),
                  radial-gradient(900px 600px at 90% 20%, #7b2cbf 0%, transparent 55%),
                  linear-gradient(180deg, #060913 0%, #0b1220 100%);
    }
    .card {
      width: min(520px, 100%);
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 22px 20px;
      backdrop-filter: blur(12px);
    }
    h1 { margin: 0 0 8px; font-size: 1.25rem; }
    .sub { margin: 0 0 18px; color: var(--muted); line-height: 1.4; font-size: 0.95rem; }
    label { display: block; margin: 12px 0 8px; color: var(--muted); font-size: 0.9rem; }
    .row { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 520px) { .row { grid-template-columns: 1.1fr 0.9fr; } }
    input, select, button {
      width: 100%;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(0, 0, 0, 0.18);
      color: var(--text);
      padding: 12px 14px;
      font-size: 1rem;
      outline: none;
    }
    input::placeholder { color: rgba(255, 255, 255, 0.45); }
    input:focus, select:focus {
      border-color: rgba(255, 255, 255, 0.35);
      box-shadow: 0 0 0 4px rgba(123, 44, 191, 0.18);
    }
    .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 14px; }
    button {
      cursor: pointer;
      background: rgba(255, 255, 255, 0.12);
      transition: transform 0.06s ease, background 0.2s ease;
      font-weight: 600;
    }
    button:hover { background: rgba(255, 255, 255, 0.18); }
    button:active { transform: translateY(1px); }
    .result {
      margin-top: 16px;
      padding: 14px;
      border-radius: 14px;
      border: 1px dashed rgba(255, 255, 255, 0.22);
      background: rgba(0, 0, 0, 0.12);
    }
    .result .big { font-size: 1.25rem; font-weight: 800; margin: 0 0 4px; }
    .result .small { margin: 0; color: var(--muted); font-size: 0.95rem; }
    .error {
      margin-top: 10px;
      color: #ffd6e7;
      background: rgba(255, 58, 105, 0.12);
      border: 1px solid rgba(255, 58, 105, 0.25);
      padding: 10px 12px;
      border-radius: 14px;
      display: none;
    }
  </style>
</head>

<body>
  <main class="card" role="application" aria-label="Unit converter">
    <h1>Kilometers ↔ Miles</h1>
    <p class="sub">Live conversion as you type — rounded to 1 decimal place.</p>

    <div class="row">
      <div>
        <label for="value">Value</label>
        <input
          id="value"
          type="number"
          inputmode="decimal"
          placeholder="e.g., 5"
          step="any"
        />
      </div>

      <div>
        <label for="direction">Conversion</label>
        <select id="direction">
          <option value="kmToMi">km → mi</option>
          <option value="miToKm">mi → km</option>
        </select>
      </div>
    </div>

    <div class="actions">
      <button id="clearBtn" type="button">Clear</button>
      <button id="swapBtn" type="button">Swap</button>
    </div>

    <div id="error" class="error" role="alert"></div>

    <section class="result" aria-live="polite">
      <p class="big" id="output">—</p>
      <p class="small" id="detail">Start typing to see the result.</p>
    </section>
  </main>

  <script>
    const KM_PER_MI = 1.609344;       // 1 mile = 1.609344 km
    const MI_PER_KM = 0.621371192237; // 1 km = 0.621371... miles
    const ROUND_DECIMALS = 1;

    const valueEl = document.getElementById("value");
    const directionEl = document.getElementById("direction");
    const outputEl = document.getElementById("output");
    const detailEl = document.getElementById("detail");
    const errorEl = document.getElementById("error");
    const swapBtn = document.getElementById("swapBtn");
    const clearBtn = document.getElementById("clearBtn");

    function roundTo(num, decimals) {
      // nearest N decimals
      const factor = Math.pow(10, decimals);
      return Math.round(num * factor) / factor;
    }

    function format(num) {
      // keep exactly 1 decimal place (nearest) for display
      return roundTo(num, ROUND_DECIMALS).toFixed(ROUND_DECIMALS);
    }

    function showError(message) {
      errorEl.textContent = message;
      errorEl.style.display = "block";
    }

    function clearError() {
      errorEl.textContent = "";
      errorEl.style.display = "none";
    }

    function convertLive() {
      clearError();

      const raw = valueEl.value;

      // empty input: reset output quietly (no error spam while typing)
      if (raw === "" || raw === null) {
        outputEl.textContent = "—";
        detailEl.textContent = "Start typing to see the result.";
        return;
      }

      const input = Number(raw);
      if (!Number.isFinite(input)) {
        outputEl.textContent = "—";
        detailEl.textContent = "Start typing to see the result.";
        showError("Please enter a valid number.");
        return;
      }

      const dir = directionEl.value;
      let result, fromUnit, toUnit, factor;

      if (dir === "kmToMi") {
        factor = MI_PER_KM;
        fromUnit = "km";
        toUnit = "mi";
      } else {
        factor = KM_PER_MI;
        fromUnit = "mi";
        toUnit = "km";
      }

      result = input * factor;

      outputEl.textContent = `${format(result)} ${toUnit}`;
      detailEl.textContent = `${format(input)} ${fromUnit} → ${format(result)} ${toUnit} (rounded to 1 decimal)`;
    }

    function swap() {
      directionEl.value = (directionEl.value === "kmToMi") ? "miToKm" : "kmToMi";
      convertLive();
    }

    function clearAll() {
      valueEl.value = "";
      clearError();
      outputEl.textContent = "—";
      detailEl.textContent = "Start typing to see the result.";
      valueEl.focus();
    }

    // Live updates
    valueEl.addEventListener("input", convertLive);
    directionEl.addEventListener("change", convertLive);

    // Buttons
    swapBtn.addEventListener("click", swap);
    clearBtn.addEventListener("click", clearAll);

    // Initial state
    convertLive();
  </script>
</body>
</html>
